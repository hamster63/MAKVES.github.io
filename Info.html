<!DOCTYPE html>
<html lang="ru">
  <link rel="stylesheet" href="csa.css">
  <head>
    <meta charset="utf-8">
    <title>MAKVES</title>
  </head>
  <body>
    <h1>Makves </h1>
    <h2 class="ser">http://dev.makves.ru:8000</h2>
    <select  class="yui">
      <option class="rr" value="">Выберите элемент</option>
      <option class="rr" value="Autorization" >Авторизация</option>
      <option class="rr" value="Setting" >Настройки</option>
      <option class="rr" value="Object">Объекты</option>
      <option class="rr" value="Risk">Объекты/Риски</option>
      <option class="rr" value="Bell">Колокольчик/Аналитики</option>
      <option class="rr" value="Incident">Инцидент</option>
    </select>
    <div class="ii">
    <div class="ww">
      
  </div>
</div>



  <!-- The Modal -->
  <div id="myModal" class="modal">
  
    <!-- Модальное содержание -->
    <div class="modal-content">
      <div class="modal-header">
        <span class="close">&times;</span>
        <h2 class="headr">Модальный заголовок</h2>
      </div>
      <div class="re">
      <p class="headr2"></p>
      <p class="headr2"></p>
      
      <button class="jis" onclick="myFunction()">Copy text</button>
    </div>
      <div class="modal-body">
        <div class="tab">
          <button class="tablinks" onclick="openCity(event, 'Response')">Response</button>
          <button class="tablinks" onclick="openCity(event, 'Request')">Request</button>
        </div>
        <div id="Request" class="tabcontent">
          <h2>Body: </h2>
          <h4 class="Format">Media type: application/json</h4>
          <h3>Query Parameters</h3>
          <div class="UL"></div>
          <div class="Des">
          <p>Example: </p>
          <div class="Restes">
            <button class="WWIS"  onclick="Download()">Copy text</button>  
          </div>
        </div>
      </div>  
        <div id="Response" class="tabcontent">
          <h3 style=" border-bottom: 1px solid black; ">HTTP status code 200</h3>
          <div class="tew">
          
          <p>Example: </p>
          <p>single-order:</p>
          
          </div>
        </div>
        
        
  </div>
  

     
</body>
<script>


</script>
<script>

getFilee("sa.json")
function getFilee (fileName) {
    var request = new XMLHttpRequest();
   
    request.open('GET', fileName);

    request.onloadend = function() {

        
        parsee(request.responseText);
    }

    request.send();
}
function parsee(obj){
  window.test = JSON.parse(obj)
}

  let yui =document.querySelector('.yui')
yui.addEventListener("click",function(e){
  let ww =document.querySelector('.ww')
  p = document.querySelector('.saww')

  if(p != null){
  p.remove()
  ww.remove()
  }
  if(e.target.value != ""){
  let ii =document.querySelector('.ii')
  p11 = document.createElement("p")
  

  ww = document.createElement("div")
  ww.classList.add('ww')
  ii.prepend(ww)
 

  ww =document.querySelector('.ww')

ss = e.target.value
  for(arrys in test[ss]){
      getFile(test[ss][arrys])
    }
    p11.classList.add('saww')
  ii.prepend(p11)
    
    
  }
  
})





function getFile (fileName) {
    var request = new XMLHttpRequest();
   
    request.open('GET', fileName);

    request.onloadend = function() {

        
        parse(request.responseText);
    }

    request.send();
}


function parse(obj) {

    let DATA = JSON.parse(obj)

    let ww = document.querySelector('.ww')
    let wwq = document.createElement("div")
    wwq.classList.add("aw")
    ww.prepend(wwq)
    
    let aw = document.querySelector('.aw')
    let sswq = document.createElement("div")
    sswq.classList.add("sswq")
    aw.prepend(sswq)
    
    if(DATA.Title != ''){
      
    sswq = document.querySelector('.sswq')
    let p = document.createElement('p')
    p231 = document.querySelector('.saww')
    p231.innerText= DATA.Title
    }
    

    let p2 = document.createElement('p')
    p2.classList.add('saw')
    sswq.append(p2)
    p2 = document.querySelector('.saw')
    p2.innerText = DATA.Title_name

    let button = document.createElement('button')
    button.classList.add('accordion')
    aw.append(button)
    button.innerText = DATA.Name

    let div2 = document.createElement("div")
    div2.classList.add("panel")
    aw.append(div2)
    div2 = document.querySelector('.panel')

    div3 = document.createElement('div')
    div3.classList.add('ssa')
    div2.append(div3)
    div3 = document.querySelector('.ssa')
       
    for(ssa in DATA.GET){

      buttonget = document.createElement("button")
      buttonget.classList.add("but")
      div3.append(buttonget)
      buttonget = document.querySelectorAll('.but')
      
      let div4 = document.createElement('div')
      div4.classList.add('ji')
      buttonget[ssa].append(div4)
      div4 = document.querySelectorAll('.ji')
      
      let p3 = document.createElement('p')
      p3.classList.add('pi')
      div4[ssa].append(p3)
      p3.innerText = DATA.GET[ssa]

      if(DATA.GET[ssa] == "GET"){
       
      p3.classList.add('get')
     }
     if(DATA.GET[ssa] == "POST"){
     
      p3.classList.add('post')

     }
     if(DATA.GET[ssa] == "DELETE"){

      p3.classList.add('delete')  

    }
    butr(buttonget[ssa],DATA.Response[0],DATA.Req[0],DATA)

    let p4 = document.createElement('p')
      p4.classList.add('jq')
      div4[ssa].append(p4)
      p4 = document.querySelectorAll('.jq')
      p4[ssa].innerText=DATA.GET_Text
      
    }
     sa(button)
     }
     




function sa(element){
  element.addEventListener("click", function() {
    this.classList.toggle("active");

    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    }

  });

}

var modal = document.getElementById("myModal");

// Get the button that opens the modal

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
function butr(element,DATA_Res,DATA_REQ,DATA){
  element.addEventListener("click", function() {
  let ser = document.querySelector('.ser').innerHTML
  let pi = element.childNodes[0].childNodes[0].innerText
  let headr = document.querySelector('.headr')
  let headr2 = document.querySelector('.headr2')
  let accordion  = document.querySelector('.accordion')
  let name = element.parentElement.parentElement.parentElement.childNodes[1].innerHTML
  headr.innerHTML = name
  console.log(element.parentElement.childNodes[0].childNodes[0])
  console.log()
  if(DATA.DOP_URL != "" && DATA.DOP_URL != undefined ){
    headr2.innerHTML = ser + name +DATA.DOP_URL
  }else if(DATA.URL_ID_DELETE != undefined && DATA.URL_ID_DELETE != "" && pi  == "DELETE"){
    headr2.innerHTML = ser + name + DATA.URL_ID_DELETE
  }else if(DATA.URL_ID_POST != undefined && DATA.URL_ID_POST != "" && pi  == "POST"){
    headr2.innerHTML = ser + name + DATA.URL_ID_POST
  }
  else{
    headr2.innerHTML = ser + name
  }
  modal.style.display = "block";


  let name2 = element.parentElement.parentElement.parentElement.childNodes[1].innerHTML
  

  let modaler = document.querySelector('.modal-header')
    if(pi == "DELETE"){
      modaler.style.backgroundColor = 'rgb(253, 91, 91)'
    }
    if(pi == "POST"){
      modaler.style.backgroundColor = 'rgb(14, 160, 9)'
    }
    if(pi == "GET"){
      modaler.style.backgroundColor = 'rgb(89, 84, 249)'
    }

  
  let UL = document.querySelector('.UL')
  let ul = document.createElement('ul')
  ul.classList.add('ul')
  UL.append(ul)
  ul = document.querySelector('.ul')

  

x=0
s=0
e=0

sss(DATA_Res[pi])
ssse(DATA_REQ[pi])

x=0
for(ifs in DATA.Text){
  let li = document.createElement('li')
  ul.append(li)
  li.classList.add('sqr')

  ssewa = document.querySelectorAll('.sqr')
console.log(ifs)
console.log(x)
  ssewa[x].innerHTML = ifs+" - "+ DATA.Text[ifs]
x++
}


x=0
s= 0



Format = document.querySelector('.Format')
Format.innerHTML = "Media type: " +DATA.Format 
})
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
  let TESS = document.querySelector('.TESS')
  TESS.remove()
  let ul = document.querySelector('.ul')
  ul.remove()
  let TESSw = document.querySelector('.TESSw')
  TESSw.remove()
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
    let TESS = document.querySelector('.TESS')
  TESS.remove()
  let ul = document.querySelector('.ul')
  ul.remove()
  let TESSw = document.querySelector('.TESSw')
  TESSw.remove()
  }
}


function ssse(DATA_Res){
  x=0
s=0
e=0


let UL = document.querySelector('.UL')
  let ul = document.createElement('ul')
  ul.classList.add('ul')
  UL.append(ul)
  ul = document.querySelector('.ul')

  let Restes = document.querySelector('.Restes')
  let TESSw = document.createElement('div')
  TESSw.classList.add('TESSw')
  Restes.append(TESSw)


  let p = document.createElement('p')
  TESSw.append(p)
  p.classList.add('isd0')
  isd0 = document.querySelectorAll('.isd0')
  isd0[0].innerText = "{"




for(ifs in DATA_Res){
  let p = document.createElement('p')

  TESSw.append(p)
  p.classList.add('isds')
  isd = document.querySelectorAll('.isds')

  ttt(DATA_Res[ifs], TESSw)
  
  x++
}
p = document.createElement('p')
  TESSw.append(p)
  p.classList.add('isd0')
  isd0 = document.querySelectorAll('.isd0')
  isd0[1].innerText = "}"

  

}








































function sss(DATA_Res){
x=0
s=0
e=0
se=0
u=0
se=0
o=0
uo=0
eo=0
swq=0
ep=0
ses=0
eqa=0
eqas=0
sesw=0
seg=0
eh=0
sy=0

let TES = document.querySelector('.tew')
  let TESS = document.createElement('div')
  TESS.classList.add('TESS')
  TES.append(TESS)
  let TESS2 = document.querySelector('.TESS')



  let p = document.createElement('p')
  TESS2.append(p)
  p.classList.add('isd0')
  isd0 = document.querySelectorAll('.isd0')
  isd0[0].innerText = "{"

for(ifs in DATA_Res){
  let p = document.createElement('p')
  TESS2.append(p)
  p.classList.add('isd')
  isd = document.querySelectorAll('.isd')
  ttt(DATA_Res[ifs], TESS2)
  
  x++
}
 p = document.createElement('p')
  TESS2.append(p)
  p.classList.add('isd0')
  isd0 = document.querySelectorAll('.isd0')
  isd0[1].innerText = "}"


}
function yy(DATA_Res,TESS2){
  
              isd[x].innerText = '"'+ifs +'": [{'
              console.log('his')
              for(uu in DATA_Res){
                    for(ww in DATA_Res[uu]){
                      console.log(DATA_Res[uu])
                      p = document.createElement('p')
                      TESS2.append(p)
                      p.classList.add('isd2')
                      isd20 = document.querySelectorAll('.isd2')
                      if(Array.isArray(DATA_Res[uu][ww])){
                if(DATA_Res[0][ww] == '[object Object]'){
                    wyy(DATA_Res[uu][ww],TESS2)
                  }
                    else{
                      wyyy(DATA_Res[uu][ww],TESS2)
                    }
                }else if(DATA_Res[uu][ww] == '[object Object]'){

                        wyyyy(DATA_Res[uu][ww],TESS2,ww)
                }else{
                  si = DATA_Res[uu][ww]
                  isd20[s].innerText = '"'+ww +'": "'+ si +'",'
                }
                      s++
                    }
                    p = document.createElement('p')
                    TESS2.append(p)
                    p.classList.add('isd2_2')
                    isd = document.querySelectorAll('.isd2_2')
                    isd[sy].innerText = '},'
                    sy++
                  }
                p = document.createElement('p')
                TESS2.append(p)
                p.classList.add('isd2_2')
                isd = document.querySelectorAll('.isd2_2')
                isd[sy].innerText = '],'
                sy++

}
function yyy(DATA_Res,TESS2){
        sai = DATA_Res
        isd[x].innerText = '"'+ifs +'": ["'+ sai+'"],'
}
function yyyy(DATA_Res,TESS2) {
          isd[x].innerText = '"'+ifs +'": {'
              for(ww in DATA_Res){
                p = document.createElement('p')
                TESS2.append(p)
                p.classList.add('isd2')
                isd20 = document.querySelectorAll('.isd2')
                if(Array.isArray(DATA_Res[ww])){
                if(DATA_Res[ww][0] == '[object Object]'){
                    console.log('hisxc')
                    wyy(DATA_Res[ww],TESS2)
                  }
                    else{
                      console.log('jisw')

                      wyyy(DATA_Res[ww],TESS2)
                    }
                }else if(DATA_Res[ww] == '[object Object]'){

                        wyyyy(DATA_Res[ww],TESS2,ww)
                }else{
                ai = DATA_Res[ww]
                isd20[s].innerText = '"'+ww +'": "' + ai+'",'
  }
                s++
              }
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd2')
          isd = document.querySelectorAll('.isd2')
          isd[s].innerText = '},'
          s++
}
function yyyyy(DATA_Res,TESS2){
  
  ai = DATA_Res
    isd[x].innerText = '"'+ifs +'": "'+ ai +'",'

}
function ttt(DATA_Res,TESS2){
  
  if(Array.isArray(DATA_Res)){
    if(DATA_Res[0] == '[object Object]'){
      console.log('his')
       yy(DATA_Res,TESS2)
    }
      else{
        console.log('hisw')
        yyy(DATA_Res,TESS2)
      }
    
  }else if(DATA_Res == '[object Object]'){
    console.log('hisg')
          yyyy(DATA_Res,TESS2)
  }
  else{
    console.log('hisx')
    yyyyy(DATA_Res,TESS2)
  }
}


function wyyy(DATA_Res,TESS2){
        sai = DATA_Res
        isd20[s].innerText = '"'+ww +'": ["'+ sai+'"],'
}

function wyyyy(DATA_Res,TESS2,ww) {
  sai = DATA_Res
          isd20[s].innerText ='"' +ww +'": {'
              for(wwe in DATA_Res){
                p = document.createElement('p')
                TESS2.append(p)
                p.classList.add('isd3')
                isd30 = document.querySelectorAll('.isd3')
                console.log('hi')
                if(Array.isArray(DATA_Res[wwe])){
                  console.log('his')
                if(DATA_Res[wwe][0] == '[object Object]'){
                  
                    eyy(DATA_Res[wwe],TESS2)
                  }
                    else{
                      eyyy(DATA_Res[wwe],TESS2)
                    }
                }else if(DATA_Res[wwe] == '[object Object]'){

                        eyyyy(DATA_Res[wwe],TESS2,ww)
                }else{
                  aei = DATA_Res[wwe]
                isd30[e].innerText ='"'+ wwe +'": "' + aei+'",'
              }
                e++
              }
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd3_3')
          isd = document.querySelectorAll('.isd3_3')
          isd[se].innerText = '},'
          se++
}

function wyy(DATA_Res,TESS2){
  
  isd20[s].innerText = '"'+ww +'": [{'
    for(usu in DATA_Res){
        for(wwe in DATA_Res[usu]){
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd3')
          isd30 = document.querySelectorAll('.isd3')
          
          if(Array.isArray(DATA_Res[usu][wwe])){
                if(DATA_Res[usu][wwe] == '[object Object]'){
                  
                    eyy(DATA_Res[usu][wwe],TESS2)
                  }
                    else{
                      eyyy(DATA_Res[usu][wwe],TESS2)
                    }
                }else if(DATA_Res[usu][wwe] == '[object Object]'){

                        eyyyy(DATA_Res[usu][wwe],TESS2,ww)
                }else{
                  si = DATA_Res[usu][wwe]
                  isd30[e].innerText = '"'+wwe + '": "'+si+'",'
                }
          e++
        }
        p = document.createElement('p')
        TESS2.append(p)
        p.classList.add('isd3_3')
        isd = document.querySelectorAll('.isd3_3')
        isd[se].innerText = '},'
        se++
      }
    p = document.createElement('p')
    TESS2.append(p)
    p.classList.add('isd3_3')
    isd = document.querySelectorAll('.isd3_3')
    isd[se].innerText = '],'
    se++

}

function eyy(DATA_Res,TESS2){
  
  isd30[e].innerText = '"'+wwe +'": [{'
  for(usuf in DATA_Res){
        for(wwes in DATA_Res[usuf]){
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd4')
          isd40 = document.querySelectorAll('.isd4')
          if(Array.isArray(DATA_Res[usuf][wwes])){
                if(DATA_Res[usuf][wwes] == '[object Object]'){
                  
                    tyy(DATA_Res[usuf][wwes],TESS2)
                  }
                    else{
                      console.log('jiswr')
                      tyyy(DATA_Res[usuf][wwes],TESS2)
                    }
                }else if(DATA_Res[usuf][wwes] == '[object Object]'){

                        tyyyy(DATA_Res[usuf][wwes],TESS2)
                }else{
                  si = DATA_Res[usuf][wwes]
                  isd40[eqa].innerText ='"'+ wwes +'": '+ si+'",'
              }
                eqa++
              }
              p = document.createElement('p')
              TESS2.append(p)
              p.classList.add('isd4_4')
              isd = document.querySelectorAll('.isd4_4')
              isd[ses].innerText = '},'
              ses++
            }

             
    p = document.createElement('p')
    TESS2.append(p)
    p.classList.add('isd4_4')
    isd = document.querySelectorAll('.isd4_4')
    isd[ses].innerText = '],'
    ses++

}
function eyyy(DATA_Res,TESS2){
        sai = DATA_Res[0]
        isd30[e].innerText =  '"'+wwe +'": ["'+ sai+'"],'
}

function eyyyy(DATA_Res,TESS2,ww) {
  sai = DATA_Res
          isd30[e].innerText = '"'+wwe +'": {'
              for(wwes in DATA_Res){
                p = document.createElement('p')
                TESS2.append(p)
                p.classList.add('isd4')
                isd40 = document.querySelectorAll('.isd4')
                if(Array.isArray(DATA_Res[wwes])){
                if(DATA_Res[wwes][0] == '[object Object]'){
                  
                    tyy(DATA_Res[wwes],TESS2)
                  }
                    else{
                      tyyy(DATA_Res[wwes],TESS2)
                    }
                }else if(DATA_Res[wwes] == '[object Object]'){

                        tyyyy(DATA_Res[wwes],TESS2)
                }else{
                  aei = DATA_Res[wwes]
                isd40[eqa].innerText = '"'+wwes +'": "' + aei+'",'
              }
                eqa++
              }
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd4_4')
          isd = document.querySelectorAll('.isd4_4')
          isd[ses].innerText = '}'
          ses++
}

function tyyyy(DATA_Res,TESS2,ww) {
  sai = DATA_Res
          isd40[eqa].innerText = '"'+wwes +'": {'
              for(wwess in DATA_Res){
                p = document.createElement('p')
                TESS2.append(p)
                p.classList.add('isd5')
                isd50 = document.querySelectorAll('.isd5')
                if(Array.isArray(DATA_Res[wwess])){
                     uyyy(DATA_Res[wwess],TESS2)
                    }
                else{
                  aei = DATA_Res[wwess]
                isd50[eqas].innerText = '"'+wwess +'": "' + aei+'",'
              }
                eqas++
              }
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd5_5')
          isd = document.querySelectorAll('.isd5_5')
          isd[sesw].innerText = '}'
          sesw++
}


function tyyy(DATA_Res,TESS2){
        sai = DATA_Res[0]
        isd40[eqa].innerText = '"'+wwes +'": ["'+ sai+'"],'
}

function tyy(DATA_Res,TESS2){
  
  isd40[eqa].innerText = '"'+wwes +'": [{'
  for(useu in DATA_Res){
        for(wwess in DATA_Res[useu]){
          p = document.createElement('p')
          TESS2.append(p)
          p.classList.add('isd5')
          isd50 = document.querySelectorAll('.isd5')
          
          if(Array.isArray(DATA_Res[useu][wwess])){
              
                  uyyy(DATA_Res[useu][wwess],TESS2)
                    
                }else{
                  si = DATA_Res[useu][wwess]
                  isd50[eqas].innerText = '"'+wwess + '": "'+si+'",'
                }
                eqas++
        }
        p = document.createElement('p')
        TESS2.append(p)
        p.classList.add('isd5_5')
        isd = document.querySelectorAll('.isd5_5')
        isd[sesw].innerText = '},'
        sesw++
      }
    p = document.createElement('p')
    TESS2.append(p)
    p.classList.add('isd5_5')
    isd = document.querySelectorAll('.isd5_5')
    isd[sesw].innerText = '],'
    sesw++

}
function uyyy(DATA_Res,TESS2){
        sai = DATA_Res[0]
        isd50[eqas].innerText = '"'+wwess +'": ["'+ sai+'"],'
}
</script>
<script>
 function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}
  </script>
  <script>
    function myFunction() {
      var shareL = document.querySelector(".headr2").innerHTML
	
	var oInput = document.createElement('input');
	oInput.value = shareL;
	document.body.appendChild(oInput);
	 oInput.select (); // выберите объект
	 document.execCommand ("Copy"); // выполнить команду копирования в браузере
	oInput.className = 'oInput';
	oInput.style.display='none';
  
alert('Ссылка скопирована')

}
function Download(){
  let sssq= document.querySelectorAll('.TESSw > p')
  sqg=[]
  console.log(sssq.innerText)
for(isqf of sssq){
  sqg.push(isqf.innerText)
}

  var oInput = document.createElement('input');
	oInput.value = sqg.join(' ');
	document.body.appendChild(oInput);
	 oInput.select (); // выберите объект
	 document.execCommand ("Copy"); // выполнить команду копирования в браузере
	oInput.className = 'oInput';
	oInput.style.display='none';
  
alert('Код скопирован')
}


  </script>

</html>